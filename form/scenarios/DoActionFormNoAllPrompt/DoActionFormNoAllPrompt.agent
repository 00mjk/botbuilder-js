<Agent xmlns:Agent="http://schemas.microsoft.com/ConversationalAgent/1.0">
    <AgentDefinition lang="en-us">

        <Task name="task1" doAction="Form">
            <CodeRecognizer onRun="task_recognizer"></CodeRecognizer>
            <FormRef name="SendText" refTo="SendText" />
        </Task>

        <Form name="SendText">
            
            <!-- Fields -->
            
            <Field entity="to" displayName="To" required="true"></Field>
            <Field entity="message" displayName="Message" required="true"></Field>

            <!-- Prompts -->

            <PromptForInput when="builtin.allRequiredFilled">
                <Feedback>Should I send a text to {to} saying {message}?</Feedback>
            </PromptForInput>
            <PromptForInput when="to">
                <Feedback>Who is the text for?</Feedback>
            </PromptForInput>
            <PromptForInput when="message">
                <Feedback>What would you like the message to be?</Feedback>
            </PromptForInput>

            <!-- Actions -->

            <FormAction type="Cancel">
                <CodeRecognizer onRun="builtin.cancel"></CodeRecognizer>
                <Feedback>Okay, I have cancelled your order.</Feedback>
            </FormAction>
            <FormAction type="Confirm">
                <CodeRecognizer onRun="builtin.confirm"></CodeRecognizer>
                <Feedback>Okay, I have sent your text</Feedback>
            </FormAction>
            <FormAction type="Help">
                <CodeRecognizer onRun="builtin.help"></CodeRecognizer>
            <Feedback>Say &quot;yes&quot; to place your order or &quot;cancel&quot; to cancel your order.</Feedback>
            </FormAction>
            <FormAction type="Submit">
                <Process name="process" onRun="submit_process"></Process>
            </FormAction>
            <FormAction type="AddOrUpdate">
                <CodeRecognizer onRun="form_recognizer"></CodeRecognizer>
            </FormAction>

        </Form>

    </AgentDefinition>
</Agent>

