<Agent xmlns:Agent="http://schemas.microsoft.com/ConversationalAgent/1.0">
    <AgentDefinition lang="en-us">

        <Task name="task1" doAction="Form">
            <CodeRecognizer onRun="task_recognizer"></CodeRecognizer>
            <FormRef name="SimpleForm" refTo="SimpleForm" />
        </Task>

        <Form name="SimpleForm">
            
            <!-- Fields -->
            
            <Field entity="x" displayName="x" required="true"></Field>
            <Field entity="y" displayName="y" required="true"></Field>
            <Field entity="z" displayName="z" required="true"></Field>

            <!-- Prompts -->

            <PromptForInput when="builtin.allRequiredFilled">
                <Feedback>OK I have {x}, {y} and {z}. Ready?</Feedback>
            </PromptForInput>
            <PromptForInput when="x">
                <Feedback>Enter a value for x.</Feedback>
            </PromptForInput>
            <PromptForInput when="y">
                <Feedback>Enter a value for y.</Feedback>
            </PromptForInput>
            <PromptForInput when="z">
                <Feedback>Enter a value for z.</Feedback>
            </PromptForInput>

            <!-- Actions -->

            <FormAction type="Cancel">
                <CodeRecognizer onRun="builtin.cancel"></CodeRecognizer>
                <Feedback>Okay, I have cancelled your order.</Feedback>
            </FormAction>
            <FormAction type="Confirm">
                <CodeRecognizer onRun="builtin.confirm"></CodeRecognizer>
                <Feedback>Okay, running the Process now...</Feedback>
            </FormAction>
            <FormAction type="Help">
                <CodeRecognizer onRun="builtin.help"></CodeRecognizer>
                <Feedback>Say &quot;yes&quot; to place your order or &quot;cancel&quot; to cancel your order.</Feedback>
            </FormAction>
            <FormAction type="Submit">
                <Process name="process" onRun="submit_process"></Process>
            </FormAction>
            <FormAction type="AddOrUpdate">

                <!-- TODO: replace this with a LUIS recognizer that will fail on 
                  extracting the single entity - therefore triggering the fallback -->
            
                <CodeRecognizer onRun="form_recognizer"></CodeRecognizer>
            </FormAction>

        </Form>

    </AgentDefinition>
</Agent>

