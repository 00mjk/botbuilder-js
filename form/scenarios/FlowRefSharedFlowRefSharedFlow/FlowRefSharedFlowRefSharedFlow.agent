<Agent xmlns="http://schemas.microsoft.com/ConversationalAgent/1.0">
  <AgentDefinition lang="en-us">
    <About>
      <CodeBehindClass>AppLogic</CodeBehindClass>
      <CodeBehindNamespace>MyConversation</CodeBehindNamespace>
    </About>
    <Task name="Greeting">
      <CodeRecognizer onRun="hi"></CodeRecognizer>
      <DialogFlow name="Flow 1" isRootFlow="true">
        <Transitions initialState="Start">
          <Transition to="Feedback" from="Start"></Transition>
          <Transition to="Module 1" from="Feedback"></Transition>
          <Transition to="Return" from="Module 1"></Transition>
        </Transitions>
        <Initial name="Start"></Initial>
        <Respond name="Feedback">
          <Feedback>In root dialog flow</Feedback>
        </Respond>
        <Return name="Return" outcome="Success"></Return>
        <DialogFlowRef name="Module 1" refTo="Shared Flow 1"></DialogFlowRef>
      </DialogFlow>
    </Task>
    <DialogFlow name="Shared Flow 1" isRootFlow="false">
      <Transitions initialState="Start">
        <Transition to="Feedback" from="Start"></Transition>
        <Transition to="Module 2" from="Feedback"></Transition>
        <Transition to="Return" from="Module 2"></Transition>
      </Transitions>
      <Initial name="Start"></Initial>
      <Return name="Return" outcome="Success"></Return>
      <Respond name="Feedback">
        <Feedback>In dialog flow 1</Feedback>
      </Respond>
      <DialogFlowRef name="Module 2" refTo="Shared Flow 2"></DialogFlowRef>
    </DialogFlow>
    <DialogFlow name="Shared Flow 2" isRootFlow="false">
      <Transitions initialState="Start">
        <Transition to="Feedback" from="Start"></Transition>
        <Transition to="Return" from="Feedback"></Transition>
      </Transitions>
      <Initial name="Start"></Initial>
      <Return name="Return" outcome="Success"></Return>
      <Respond name="Feedback">
        <Feedback>In dialog flow 2</Feedback>
      </Respond>
    </DialogFlow>
  </AgentDefinition>
</Agent>
