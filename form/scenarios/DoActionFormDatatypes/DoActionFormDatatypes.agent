<Agent xmlns:Agent="http://schemas.microsoft.com/ConversationalAgent/1.0">
    <AgentDefinition lang="en-us">

        <Task name="task1" doAction="Form">
            <CodeRecognizer onRun="task_recognizer"></CodeRecognizer>
            <FormRef name="SimpleForm" refTo="SimpleForm" />
        </Task>

        <Form name="SimpleForm">
            
            <!-- Fields -->
            
            <Field entity="to" displayName="to" required="true" dataType="String">
                <Constraint type="min" value="0"/>
                <Constraint type="max" value="20"/>
            </Field>
            <Field entity="from" displayName="from" required="true" dataType="String">
                <Constraint type="min" value="0"/>
                <Constraint type="max" value="20"/>
            </Field>
            <Field entity="departure" displayName="departure date" required="true" dataType="DateTime">
                <Constraint type="timex" value="XXXX-XX"/>
                <Constraint type="timex" value="XXXX-XX"/>
            </Field>

            <!-- Prompts -->

            <PromptForInput when="builtin.allRequiredFilled">
                <Feedback>OK I have you going to {to}, departing on {departure} from {from}. Ready?</Feedback>
            </PromptForInput>
            <PromptForInput when="to">
                <Feedback>Where to?</Feedback>
            </PromptForInput>
            <PromptForInput when="from">
                <Feedback>Where from?</Feedback>
            </PromptForInput>
            <PromptForInput when="departure">
                <Feedback>When would you like to leave?</Feedback>
            </PromptForInput>

            <!-- Actions -->

            <FormAction type="Cancel">
                <CodeRecognizer onRun="builtin.cancel"></CodeRecognizer>
                <Feedback>Okay, I have cancelled your trip.</Feedback>
            </FormAction>
            <FormAction type="Confirm">
                <CodeRecognizer onRun="builtin.confirm"></CodeRecognizer>
                <Feedback>Okay, booking your journey.</Feedback>
            </FormAction>
            <FormAction type="Help">
                <CodeRecognizer onRun="builtin.help"></CodeRecognizer>
                <Feedback>Say &quot;yes&quot; to confirm your booking or &quot;cancel&quot; to cancel.</Feedback>
            </FormAction>
            <FormAction type="Submit">
                <Process name="process" onRun="submit_process"></Process>
            </FormAction>
            <FormAction type="AddOrUpdate">
                <!-- if a recognizer is not given here the task recognizer should be used -->
                <RegexRecognizer pattern="no-match"></RegexRecognizer>
            </FormAction>

            <!-- reprompt works like an implicit action -->
            <Reprompt>
                <Feedback>If you could please give me a value for [builtin.lastPrompt] that would be great.</Feedback>
            </Reprompt>

        </Form>

    </AgentDefinition>
</Agent>

